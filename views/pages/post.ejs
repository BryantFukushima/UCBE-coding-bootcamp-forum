<!DOCTYPE html>
<html>

<head>
    <!-- head.ejs -->
    <% include ../partials/head %>
</head>

<body>
    <!-- message to login -->
    <div class="login-err-msg">
        <%= loginErr.errLogin %>
    </div>
    <div class="post-sec">
        <div class="post-text">
            <p>
                <%= title %>
            </p>
            <p>
                <%= category %>
            </p>
            <p>
                <%= post %>
            </p>
        </div>
        <div class="post-lik-disl">
            <!-- like button for posts -->
            <form method="POST" action="/likes">
                <input type="hidden" name="post_id" value="<%= post_id %>">
                <input type="hidden" name="type_id" value="<%= post_id %>">
                <input type="hidden" name="type" value="post">
                <input type="hidden" name="like" value="1">
                <% if(user) { %>
                    <button type="submit">Like</button>
                    <% } else { %>
                        <button type="submit" disabled>Like</button>
                        <% } %>
            </form>
            <!-- dislike button for comments -->
            <form method="POST" action="/likes">
                <input type="hidden" name="post_id" value="<%= post_id %>">
                <input type="hidden" name="type_id" value="<%= post_id %>">
                <input type="hidden" name="type" value="post">
                <input type="hidden" name="like" value="0">
                <% if(user) { %>
                    <button type="submit">Dislike</button>
                    <% } else { %>
                        <button type="submit" disabled>Dislike</button>
                        <% } %>
            </form>
        </div>
    </div>
    <div class="create-com-sec">
        <form method="POST" action="/createcomment">
            <input type="hidden" name="post_id" value="<%= post_id %>">
            <textarea rows="5" name="comment" placeholder="Type Something..."></textarea>
            <% if(user) { %>
                <button type="submit">Submit</button>
                <% } else { %>
                    <button type="submit" disabled>Submit</button>
                    <% } %>
        </form>
    </div>
    <div class="comment-sec">
        <% for (var i in comments) { %>
            <% if (comments[0].comment != null) { %>
                <div class="comments">
                    <p>
                        <%= comments[i].comment %>
                    </p>
                    <!-- like button for comments -->
                    <form method="POST" action="/likes">
                        <input type="hidden" name="post_id" value="<%= post_id %>">
                        <input type="hidden" name="type_id" value="<%= comments[i].id %>">
                        <input type="hidden" name="type" value="comment">
                        <input type="hidden" name="like" value="1">
                        <% if(user) { %>
                            <button type="submit">Like</button>
                            <% } else { %>
                                <button type="submit" disabled>Like</button>
                                <% } %>
                    </form>
                    <!-- dislike button for comments -->
                    <form method="POST" action="/likes">
                        <input type="hidden" name="post_id" value="<%= post_id %>">
                        <input type="hidden" name="type_id" value="<%= comments[i].id %>">
                        <input type="hidden" name="type" value="comment">
                        <input type="hidden" name="like" value="0">
                        <% if(user) { %>
                            <button type="submit">Dislike</button>
                            <% } else { %>
                                <button type="submit" disabled>Dislike</button>
                                <% } %>
                    </form>
                </div>
                <% } %>
                    <% } %>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
</body>

</html>